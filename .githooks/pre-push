#!/usr/bin/env bash
set -euo pipefail

# Run format check, lint, and build before push (using the docker compose dev container).

if ! docker compose run --rm --no-deps nextjs sh -c "npm run format:check && npm run lint && npm run build"; then
  cat >&2 <<'EOF'
Format check, lint, or build failed.
Please fix the issues before pushing.
You can run it manually with:
docker compose run --rm --no-deps nextjs sh -c "npm run format:check && npm run lint && npm run build"
EOF
  exit 1
fi
